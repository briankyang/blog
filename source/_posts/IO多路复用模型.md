---
title: IO多路复用模型
date: 2020-03-21 16:47:35
tags:
---

# IO多路复用

原话: I/O multiplexing

IO多路复用可以使用更少的资源来提升更多的并发读，提高线程资源的利用率

IO多路复用允许应用在多个文件描述符上阻塞，然后当其中一个可读写的时候得到通知。

IO多路复用的设计遵循以下几点

1. 当任何文件描述符准备好I/O时通知我

2. 在一个或更多描述符就绪前始终处于睡眠状态

3. 唤醒：哪个准备好了

4. 在不阻塞的情况下处理所有io就绪的文件描述符

5. 返回第一步，重新开始

## 实现方式

- select/poll
  
  - 一组描述符，然后进行系统调用，进行注册，待文件可以读写时候返回，程序再进行判断去处理即可
  
  - 每次调用时都需要所有被监听的文件描述符，内核必须遍历所有被监视的文件描述符

- epoll
  
  - 把监听注册从实际监听中分离出来，解决性能问题
  
  - 水平出发
    
    - 可读立即返回
  
  - 边沿触发
    
    - 有写入数据后才返回
  
  - 优点
    
    - 支持一个进程打开大数目的socket描述符
    
    - IO效率不随FD数目增加而线性下降
    
    - 使用mmap加速内核与用户空间的消息传递

# 零拷贝

# Reactor模式

# Proactor模式
