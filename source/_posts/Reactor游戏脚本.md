---
title: Reactor游戏脚本
date: 2020-04-25 10:05:02
tags: Reactor
---

# 背景

之前玩某游戏时，玩得特别累，基本上都是重复性工作，遂想到用脚本代替手工操作，一边可以专心学习，一遍游戏可以正常玩。题主以前用按键精灵写过一些游戏脚本，遂这次从开始也用按键精灵做了一点开发，虽然功能可以正常使用，但按键精灵软件首次启动总是很卡（9700k+2070s），遂想使用高级语言进行开发和调试，题主第一个想到的是用c++开发，然后备选使用c#搭配wpf进行开发，随后写了两个case之后发现c#打印日志似乎有点慢，遂决定采用c++开发，正好以前做过c++，于是乎题主想到用c++和大漠插件配合win32api进行脚本的开发。

对于脚本的分析: 题主以前做的脚本基本都是流程上的，结果偶尔会出现卡在某个界面上不能继续进行下去的问题。遂本次在脚本开发伊始，就想到一种界面检测然后触发对应操作的一种游戏脚本模式，但一开始做的有点问题，效率较低，以下为一开始的想法的图解。

<img title="" src="D:\Projects\blog\source\img\script-struct.svg" alt="" data-align="inline">

这种模式有个问题就是每个GameFrame都需要进行检测一次，效率较低（都会通过大漠对象去进行图色检测）。

改进后的方式如下：

![avatar](D:\Projects\blog\source\img\reactor-script-struct.svg)

# 框架设计

基于上述简易时序图，动手设计整个脚本的框架
